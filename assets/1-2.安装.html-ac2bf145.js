import{_ as e,r as i,o,c as l,a as n,b as a,d as t,e as d}from"./app-9c74391d.js";const c="/java-doc/img/sql/mongodb/1-2-1.png",r={},p=n("p",null,[n("strong",null,"当前版本：6.0.5")],-1),u=n("h2",{id:"i-windows",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#i-windows","aria-hidden":"true"},"#"),a(" Ⅰ. Windows")],-1),m=n("h4",{id:"_1-下载安装包",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-下载安装包","aria-hidden":"true"},"#"),a(" 1. 下载安装包")],-1),v={href:"https://www.mongodb.com/download-center#community",target:"_blank",rel:"noopener noreferrer"},b=d('<figure><img src="'+c+`" alt="1-2-1" tabindex="0" loading="lazy"><figcaption>1-2-1</figcaption></figure><p><strong>版本的选择</strong></p><p>MongoDB的版本命名规范如：x.y.z；</p><ul><li>y为奇数时表示当前版本为开发版</li><li>y为偶数时表示当前版本为稳定版</li><li>z是修正版本号，数字越大越好</li></ul><h4 id="_2-安装" tabindex="-1"><a class="header-anchor" href="#_2-安装" aria-hidden="true">#</a> 2. 安装</h4><p>下载的打包格式选zip，即为绿色软件，直接解压即可。<br> 在解压的目录中，创建一个存放数据的目录，如：data/db</p><h4 id="_3-启动" tabindex="-1"><a class="header-anchor" href="#_3-启动" aria-hidden="true">#</a> 3. 启动</h4><div class="hint-container tip"><p class="hint-container-title">提示</p><p>下载的是绿色软件，是没有配置环境变量的（可以选择手动配置），启动时需要在bin目录输入命令，且需要手动指定参数。</p></div><h4 id="_3-1-通过参数启动服务" tabindex="-1"><a class="header-anchor" href="#_3-1-通过参数启动服务" aria-hidden="true">#</a> 3.1 通过参数启动服务</h4><p>在软件的bin目录，输入以下命令：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>mongod --dbpath=..\\data\\db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>--dbpath：该参数用来指定数据库存放的位置</li><li>启动的方式是进程占用（非守护进程）</li><li>默认的服务端口是27017，可以通过--port来手动指定端口</li></ul><h4 id="_3-2-通过配置文件启动服务" tabindex="-1"><a class="header-anchor" href="#_3-2-通过配置文件启动服务" aria-hidden="true">#</a> 3.2 通过配置文件启动服务</h4><p>将启动的参数写入配置文件，然后通过配置文件启动服务。</p><p>在解压目录中新建 config 文件夹，该文件夹中新建配置文件 mongod.conf ，内容参考如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">storage</span><span class="token punctuation">:</span>
  <span class="token key atrule">dbPath</span><span class="token punctuation">:</span> D<span class="token punctuation">:</span>\\vender\\mongodb<span class="token punctuation">-</span>6.0.5\\data\\db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>启动方式</strong></p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>mongod -f ../config/mongod.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ii-linux" tabindex="-1"><a class="header-anchor" href="#ii-linux" aria-hidden="true">#</a> Ⅱ. Linux</h2><h4 id="_1-下载压缩包" tabindex="-1"><a class="header-anchor" href="#_1-下载压缩包" aria-hidden="true">#</a> 1. 下载压缩包</h4><p>平台选Linux，打包格式选tgz。<br> 下载安装包，并上传到服务器的 <code> /opt/</code>目录</p><h4 id="_2-安装-1" tabindex="-1"><a class="header-anchor" href="#_2-安装-1" aria-hidden="true">#</a> 2. 安装</h4><p>该软件是绿色软件，在Linux上也不用安装，解压即可。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> mongodb-6.0.5.tgz <span class="token parameter variable">-C</span> /opt/mongodb/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解压后需要在mongodb目录下新建目录和配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ./single/data/db  <span class="token comment"># 数据存储目录</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ./single/log  <span class="token comment"># 日志存储目录</span>
<span class="token function">touch</span>  ./single/mongod.conf  <span class="token comment"># 配置文件</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-配置" tabindex="-1"><a class="header-anchor" href="#_3-配置" aria-hidden="true">#</a> 3. 配置</h4><p>生产端配置的详细一些，格式为yml<br> 配置文件的内容如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">systemLog</span><span class="token punctuation">:</span>
     <span class="token comment">#MongoDB发送所有日志输出的目标指定为文件</span>
     <span class="token key atrule">destination</span><span class="token punctuation">:</span> file
     <span class="token comment">#mongod或mongos应向其发送所有诊断日志记录信息的日志文件的路径</span>
     <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/opt/mongodb/mongodb-6.0.5/single/log/mongod.log&quot;</span>
     <span class="token comment">#当实例重新启动时，会将新条目附加到现有日志文件的末尾。</span>
     <span class="token key atrule">logAppend</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">storage</span><span class="token punctuation">:</span>
     <span class="token comment">#mongod实例存储其数据的目录。storage.dbPath设置仅适用于mongod。</span>
     <span class="token key atrule">dbPath</span><span class="token punctuation">:</span> <span class="token string">&quot;/opt/mongodb/mongodb-6.0.5/single/data/db&quot;</span>
     <span class="token key atrule">journal</span><span class="token punctuation">:</span>
          <span class="token comment">#启用或禁用持久性日志以确保数据文件保持有效和可恢复。</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">processManagement</span><span class="token punctuation">:</span>
     <span class="token comment">#启用在后台运行mongos或mongod进程的守护进程模式。</span>
     <span class="token key atrule">fork</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">net</span><span class="token punctuation">:</span>
    <span class="token comment">#服务实例绑定的IP，默认是localhost,配置的是服务器内网IP</span>
    <span class="token key atrule">bindIp</span><span class="token punctuation">:</span> localhost<span class="token punctuation">,</span>172.16.0.9
    <span class="token comment">#bindIp绑定的端口，默认是27017</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">27017</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-启动服务" tabindex="-1"><a class="header-anchor" href="#_4-启动服务" aria-hidden="true">#</a> 4. 启动服务</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/opt/mongodb/bin/mongod <span class="token parameter variable">-f</span> /opt/mongodb/single/mongod.conf

<span class="token comment"># 启动成功的提示信息</span>
about to fork child process, waiting <span class="token keyword">until</span> server is ready <span class="token keyword">for</span> connections.
forked process: <span class="token number">3019275</span> <span class="token comment"># 进程编号</span>
child process started successfully, parent exiting

<span class="token comment"># 查看是否启动了</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> mongod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-关闭服务" tabindex="-1"><a class="header-anchor" href="#_5-关闭服务" aria-hidden="true">#</a> 5. 关闭服务</h4><p>关闭服务设计到权限验证，详见：安全认证</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#方式一：通过进程编号关闭节点，可能会损害数据</span>
<span class="token function">kill</span> <span class="token parameter variable">-2</span> <span class="token number">54410</span>

<span class="token comment">#方式二：通过命令关闭，需要先连接MongoDB</span>
mongod <span class="token parameter variable">--port</span> <span class="token number">27017</span>
use admin <span class="token comment"># 切换到admin库</span>
db.shutdownServer<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#关闭服务</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="iii-macos" tabindex="-1"><a class="header-anchor" href="#iii-macos" aria-hidden="true">#</a> Ⅲ. MacOS</h2><div class="hint-container warning"><p class="hint-container-title">注意</p><p>暂略，用到时再说</p></div>`,36);function h(k,g){const s=i("ExternalLinkIcon");return o(),l("div",null,[p,u,m,n("p",null,[a("下载地址："),n("a",v,[a("https://www.mongodb.com/download-center#community"),t(s)])]),b])}const f=e(r,[["render",h],["__file","1-2.安装.html.vue"]]);export{f as default};
