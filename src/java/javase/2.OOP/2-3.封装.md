---
title: "2-3. 封装"
date: 2023-06-03
---

## Ⅰ. 介绍
#### 程序设计的追求
- 高内聚 ：类的内部数据操作细节自己完成，不允许外部干涉；
- 低耦合 ：仅对外暴露少量的方法用于使用。

#### 1. 什么是封装
隐藏对象内部的复杂性，只对外公开简单的接口。便于外界调用，从而提高系统的可扩展性、可维护性。通俗的说，把该隐藏的隐藏起来，该暴露的暴露出来。这就是封装性的设计思想。

#### 2. 封装性的意义
当我们使用一个类时，如果直接对类内部的属性进行访问和操作，可能会导致数据的错误、混乱或安全性问题。
```java
public class Test{
    public static void main(String[] args){
        Person p1 = new Person();
        p1.age = -1; //修改了Person类内部的属性
    }
}
class Person{
    int age;
    String uname;
}
```
##### 2.1 直接访问属性
如上，我们在类外部直接访问了类内部的属性，将年龄设置成了负数，这是不符合常理且危险的。我们正确的做法是，属性只能在类的内部访问，在类外部访问需要通过方法，我们可以在方法中通过方法体来验证和保护要访问的数据。

##### 2.2 通过封装保护属性
如下，我们通过将属性设置为私有的，禁止外部访问，来包含属性，并设置 setxxx和get方法来访问和操作属性。
```java
public class Test{
    public static void main(String[] args){
        Person p1 = new Person();
        p1.getAge;
        p1.age = 10;//报错，私有属性无权访问
        p1.setAge(10)
    }
}
class Person{
    private int age;
    String uname;
    
    public void setAge(a){
        if(a<=0){
            age  = 1;
        }else{
            age = a;
        }
    }
    
    public void getAge(){
        return age;
    }
}
```
##### 2.3 总结
Java中通过将数据声明为私有的(private)，再提供公共的（public）方法:getXxx() 和setXxx()实现对该属性的操作，以实现下述目的：
- 隐藏一个类中不需要对外提供的实现细节；
- 使用者只能通过事先定制好的方法来访问数据，可以方便地加入控制逻辑，限制对属性的不合理操作；
- 便于修改，增强代码的可维护性；

#### 3. 封装思想的体现
- 如上：Java中通过将数据声明为私有的(private)，再提供公共的（public）方法:getXxx() 和setXxx()实现对该属性的操作
- 不对外暴露的私有的方法：将一些方法也设置成私有的。
- 单例模式
#### 4. 封装性的总结
Java提供了4种权限修饰符来修饰类及类的内部结构，体现类及类的内部结构在被调用时的可见性的大小。


## Ⅱ. 权限修饰符

#### 1. 四种访问权限修饰符
Java权限修饰符置于类的成员定义前，用来限定对象对该类成员的访问权限。

四种权限从大到小为：public、protected、缺省、private

#### 2. 具体修饰的目标
- 修饰类的内部结构：属性、方法、构造器、内部类
- 修饰类：修饰类的话，只能使用：缺省、public
    - public类可以在任意地方被访问
    - default（缺省）类只可以被同一个包内部的类访问

#### 3. 权限范围介绍
![2-3-1](/img/java/javase/2-3-1.jpg)

#### 4. 开发中的做法
在实际开发中，我们一般都将属性定义为私有的，访问和操作都以方法的形式
- setXxx：设置成员
- getXxx：获取成员