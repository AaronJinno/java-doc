---
title: "1-7. 运算符"
date: 2023-06-02
---
## Ⅰ. 算术运算符
![1-7-1](/img/java/javase/1-7-1.jpg)

#### 1. 除号运算的细节
两个int类型相除，结果一定是个int类型（舍去小数位），即便用double类型接收，也是int类型的结果转为了double，小数位的值，还是被舍弃了，如果想保留小数位，则需要运算时就进行类型转换。
```java
int n1 = 12;
int n2 = 5;
int result = n1/n2;//2, n1/n2的结果是int类型的，没有小数位
double result = n1/n2;//2.0,只是将int类型的结果2.0类型转换成了double
double result = (double)num1/num2;//2.4
double result = (num1+0.0)/num2;//2.4
```
#### 2. 取模的细节
结果的符号与被膜数的符号形同。取模一般用来判断是否能除尽。

#### 3. 自增、自减的细节
- (前)++ :先自增1，后运算
- (后)++ :先运算，后自增1
- (前)-- :先自减1，后运算
- (后)-- :先运算，后自减1
```java
int a1 = 10;
int a2 = ++a1;
System.out.println(a1,a2);//11,11
int b1 = 10;
int b2 = b1++;//b1先取10，赋值给b2,然后才自增的
System.out.println(b1,b2);//11,10
```

自增、自减不会改变数据类型
```java
short s1 = 10;
s1 = s1 + 1;//编译失败，s1是sort类型的，无法接收int类型的1
s1++; //正确，自增不会改变变量的数据类型
```


## Ⅱ. 赋值运算符
#### 1. `==` 赋值运算符
支持连续赋值
```java
int i1,i2; 
i1 = i2 = 10;
int i3 = 10; i4 = 20;
```
#### 2. 扩展赋值运算符
`+=, -=, *=, /=, %=` 先运算再把结果进行赋值；
```java
int i1 = 10;
i1 += 5// i1 = i1 + 5;
```
#### 3. 数据类型不改变
与自增自减一样，扩展赋值运算符，不会改变变量本身的数据类型；
```java
short s1 = 10;
s1 += 2; //12,不会报错，变量本身的数据类型没有发生改变
int i = 1;
i *= 0.1; //0;不会改变变量类型，所以结果是0.
```

#### 4. 开发中的选择
因为扩展赋值运算符不会改变变量的类型，所以在开发中，优先选择他来替代算数运算符。


## Ⅲ. 比较运算符
#### 1. 概述
比较运算符的结果都是boolean型，也就是要么是true，要么是false。

注意：比较运算符 `==` 不能误写成 `=`。

#### 2. 使用细节
比较运算符不能连续使用；
```java
int a = 10;
if(5<a<=20) XXX ;//这种写法是错误的
if(5<a && a<=20) √;//正确的写法
```

## Ⅳ. 逻辑运算符
![1-7-2](/img/java/javase/1-7-2.jpg)
#### 1. 概述
- `&`: 逻辑与     
- `|`: —逻辑或         
- `!`: 逻辑非
- `&&`: 短路与        
- `||`: 短路或          
- `^`: 逻辑异或

#### 2. 使用
逻辑运算符用于连接布尔型表达式，在Java中不可以写成`3<x<6`，应该写成`x>3 & x<6` 。

#### 3. 短路情况
开发中，优先使用短路的&和|
- “&”和“&&”的区别：单&时，左边无论真假，右边都进行运算；双&时，如果左边为真，右边参与运算，如果左边为假，那么右边不参与运算。
- “|”和“||”的区别同理，||表示：当左边为真，右边不参与运算。

## Ⅴ. 位运算符
仅了解，Java源码中会用到。
#### 1. 概述
位运算符，就是在内存上进行的二进制bit位的运算。【只支持数值类型】

![1-7-3](/img/java/javase/1-7-3.jpg)

#### 2. 补位的细节
![1-7-4](/img/java/javase/1-7-4.jpg)

#### 3. 细节补充
- `<<` 左移：bit位向左移动，右边补0，每移动一位，相当于 乘了一次2。
    - 如果最高位移动到了符号位，就会变成负数。（符号位是1，则变负数）
- `>>` 右移：bit位向右移动，左边补位，如果符号位是1，就补1，是0就补0.
- `~` 取反
    - 如下：底层表示-6，是以补码的形式，因此 `-6的反码 == -6的补码-1`（负数补码= 反码+1），所以6取反的结果是-7
```java
 0000 0000 0000 0000 0000 0000 0000 0110  //6
 1000 0000 0000 0000 0000 0000 0000 0110 //-6的源码
 1111  1111  1111  1111  1111  1111 1001 //-6的反码
```

## Ⅵ. 三元运算符
#### 1. 格式
条件表达式的结果为boolean类型； 根据条件表达式真或假，决定执行表达式1，还是表达式2

![1-7-5](/img/java/javase/1-7-5.jpg)

#### 2. 使用说明
##### 2.1 表达式1 和表达式2为 同种类型
三元运算符的结果是要被变量接收的，接收的变量类型要与表达式结果的变量类型一致（或能自动转换）。所以也要求表达式1和表达式2的数据类型要一样。
```java
int m = 10;
int n = 5;
int max = (m>n)? m : n; //m
int max = (m>n)? m : "n大"; //报错，两个表达式类型不一致
```
##### 2.2 三元运算符的嵌套
三元运算符是可以嵌套使用的，比如计算两个值谁大，或者是相等
```java
int m = 10;
int n = 5;
String maxStr = (m > n)? "m大" : ((m == n)? "m和n相等" : "n大");
```
##### 2.3 三元运算符与if-else
凡是可以使用三元运算符的地方，都可以改写为if-else；
如果程序既可以使用三元运算符，又可以使用if-else结构，那么优先选择三元运算符。   

原因：简洁、执行效率高。


## Ⅶ. 运算符优先级
:::tip
不用记，不确定的地方加（）就行了。
:::

