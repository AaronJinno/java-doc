---
title: 4-4. MongoDB
date: 2023-07-04
---
#### 1. 依赖
一般采用springboot data 整合的MongoDB
```xml
<!-- mongodb -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-mongodb<artifactId>
</dependency>
```

#### 2. application.yml
主要配置MongoDB的连接参数。

有两种连接方式：
- URI：直接使用连接的URI进行连接，这个URI和MongoDB Compass连接信息里的URI基本是一样的
    - 推荐这种，配置项更简洁
    - URI可以是单例也可以是MongoDB，比较方便
- 选项链接：列出连接数据库的各个选项进行链接
```yml
# URI链接


# 选项连接的方式
spring:
  data:
    mongodb:
      database: article
    # username: blog
    # password: 1234
      host: 159.75.225.162
      port: 27017
```

##### URI的格式
在Java中使用MongoDB需要指明操作的库，且库要提前创建好
- 无密码单例：`mongodb://ip:port/数据库名`
- 有密码单例：`mongodb://username:password@ip:port/数据库名`
- mongodb://username:password@ip:port,ip:port,ip:port/数据库名

#### 3. 密码的验证
当服务器开启密码验证时，连接服务器就需要用户名和密码了。

##### 3.1 用户名和数据库匹配


##### 3.2 密码验证的方式


db.system.version.findOne({"_id":"authSchema"})

{
  _id: 'authSchema',
  currentVersion: 5
}

db.system.version.updateOne({
  {_id:"authSchema"},
  {
    $set:{
        currentVersion:3
    }
  }
})

db.system.version.update({"_id":"authSchema"},{$set:{"currentVersion":5}})